---
title: å¼€å‘å°è®°
icon: file
order:
date: 2025-08-05
category:
  - Java
tags:
---
è¿™é‡Œå°†è®°å½•æˆ‘åœ¨å¼€å‘è¿‡ç¨‹ä¸­ï¼Œé‡åˆ°çš„ä¸€äº›å°çš„ç›²ç‚¹ã€‚å¾…æˆ‘æœ‰æ—¶é—´çš„æ—¶å€™ï¼Œä¾¿ä¼šè§£å†³å®ƒä»¬ã€‚

## ä»£ç è§„èŒƒ Code Specifications


> [!TIP] 
> ä¸è¦è¿‡åº¦æŠ½å–æ–¹æ³• DO NOT OVER-EXTRACT METHODS

- æŠ½å–æ—¶æœº
	- å¦‚æœæŠ½å–çš„æ–¹æ³•åªè¢«ä¸€ä¸ªåœ°æ–¹è°ƒç”¨ï¼Œå¯èƒ½å°±æ˜¯è¿‡åº¦æŠ½å–äº†ã€‚å½“ç›¸åŒçš„ä»£ç å‡ºç°ä¸‰æ¬¡æ—¶ï¼Œå†è€ƒè™‘æŠ½å–ï¼Œé¿å…çœ‹åˆ°ä»»ä½•é‡å¤å°±ç«‹å³æŠ½å–æ–¹æ³•
	- æ¯ä¸ªæ–¹æ³•åº”è¯¥åªåšä¸€ä»¶äº‹ï¼ˆSingle Responsibility Principleï¼‰
- æŠ½å–åŠ¨æœº
	- å¥½çš„æŠ½å–åŠ¨æœºï¼šçœŸæ­£çš„é‡å¤ä½¿ç”¨ã€å¤æ‚é€»è¾‘ç®€åŒ–
	- ä¸å¥½çš„æŠ½å–åŠ¨æœºï¼šä¸ºäº†å‡å°‘æ–¹æ³•é•¿åº¦è€Œç›²ç›®æ‹†åˆ†

> ä»£ç çš„å¯è¯»æ€§æ›´é‡è¦ã€‚æœ‰æ—¶å€™ç›´è§‚çš„é‡å¤ä»£ç æ¯”è¿‡åº¦æŠ½å–çš„"ä¼˜é›…"ä»£ç æ›´å®¹æ˜“ç†è§£å’Œç»´æŠ¤ã€‚


> [!TIP] 
> ä¸è¦è¿‡åº¦è¿½æ±‚æ‰€è°“çš„è§„èŒƒæ€§ DO NOT OVER-PURSUE THE SO-CALLED â€œSTANDARDIZATIONâ€

- å…³äº DTO 
	- å½“éœ€è¦è¿‡æ»¤æ•æ„Ÿå±æ€§ã€æ•°æ®è½¬æ¢ã€DO åŒ…å«æ— å…³å­—æ®µã€æˆ–æœ‰æ€§èƒ½ä¼˜åŒ–è¦æ±‚æ—¶ï¼Œæ‰è€ƒè™‘ä¸º API å±‚åˆ›å»º DTOã€‚

- å…³äº VO
	- å½“ DTO ä¸èƒ½æ»¡è¶³å‰ç«¯å±•ç¤ºéœ€æ±‚æ—¶ï¼Œæ‰éœ€è¦å¼•å…¥ VO
	- æ¯”å¦‚ API çš„è¿”å›æ•°æ®éœ€è¦è¿›è¡Œå¤šä¸ªä¸šåŠ¡æ•°æ®ç»„åˆï¼Œæˆ–è€…å‰ç«¯éœ€è¦çš„æ•°æ®ç»“æ„ä¸æ•°æ®åº“å·®å¼‚å¾ˆå¤§
	- éœ€è¦æ˜¾ç¤ºç»Ÿè®¡ä¿¡æ¯ï¼Œæ˜¾ç¤ºè¡ç”Ÿå­—æ®µï¼Œç‰¹å®šæ ¼å¼åŒ–ç­‰æ—¶
	- éœ€è¦åˆ†é¡µä¿¡æ¯ï¼ˆæ€»è®°å½•æ•°ã€å½“å‰é¡µã€é¡µå¤§å°ç­‰ï¼‰


## å‰ç«¯ FRONTEND

> [!tip] 
> å‰ç«¯è®¡ç®—åï¼Œæ ¼å¼åŒ–ç²¾åº¦çš„æ“ä½œè¦æ”¾åœ¨æœ€åçš„æ—¶å€™å»å¤„ç†

ä¹‹å‰æˆ‘å°±ç–å¿½ç»™æ”¾é”™ä½ç½®äº†ï¼Œå¯¼è‡´ç®—å‡ºæ¥çš„ç²¾åº¦ä¸å¯¹â€¢á´—â€¢ğŸ’§ 

 > [!tip] 
 > å‰ç«¯å¤„ç†æ•°æ®æ—¶ï¼Œå¯ä»¥ä½¿ç”¨ `await`ï¼Œä»¥ç¡®ä¿å¼‚æ­¥çš„æ“ä½œå¯ä»¥åŒæ­¥è¿›è¡Œï¼Œé¿å…åç»­æ“ä½œä½¿ç”¨è„æ•°æ®è®¡ç®—

å½“æ—¶è¦å‚ä¸è®¡ç®—çš„å˜é‡æ‰“å° log æ•°æ®éƒ½æ­£å¸¸ï¼Œä½†æ˜¯æœ€ç»ˆè®¡ç®—çš„ä¸å¯¹ã€‚åæ¥æ’æŸ¥å‡ºæ¥åŸæ¥æ˜¯è¿™ä¸ªå‚æ•°è¿˜æ²¡æœ‰å¤„ç†å®Œæ¯•æ—¶ï¼Œè®¡ç®—å…¬å¼å°±ä½¿ç”¨è„æ•°æ®è®¡ç®—å¹¶æ˜¾ç¤ºäº†ã€‚

## åç«¯ BACKEND

> [!tip] 
> åç«¯è¿›è¡Œç±»å‹è½¬æ¢æ—¶ï¼Œæœ€å¥½æ˜¯ä½¿ç”¨ç©ºå€¼å®‰å…¨çš„å·¥å…·ç±»è¿›è¡Œè½¬æ¢

è¿™å¯ä»¥é¿å…å°† `null` å€¼è½¬æˆ null å­—ç¬¦ä¸²çš„é—®é¢˜ï¼ˆæ•°æ®åº“ç±»å‹è®¾è®¡è§„èŒƒæ—¶åº”è¯¥æ²¡æœ‰è¿™ç§é—®é¢˜ï¼‰ 

ä¸€ä¸ªç±»å‹è½¬æ¢å·¥å…·å®ä¾‹ï¼š
```java
public class TypeConvertUtil {

	// ç§æœ‰æ„é€ å™¨ï¼Œé˜²æ­¢å®ä¾‹åŒ– 

    /**
     * Integerè½¬Stringï¼Œç©ºå€¼å®‰å…¨
     * 
     * @param value Integerå€¼
     * @return Stringå€¼ï¼Œå¦‚æœè¾“å…¥ä¸ºnullåˆ™è¿”å›null
     */
    public static String integerToString(Integer value) {
        return value != null ? String.valueOf(value) : null;
    }

    /**
     * Longè½¬Stringï¼Œç©ºå€¼å®‰å…¨
     * 
     * @param value Longå€¼
     * @return Stringå€¼ï¼Œå¦‚æœè¾“å…¥ä¸ºnullåˆ™è¿”å›null
     */
    public static String longToString(Long value) {
        return value != null ? String.valueOf(value) : null;
    }
}
```

> [!question] 
> ä¸ºä»€ä¹ˆ Feign åºåˆ—åŒ–å®ä½“ç±»çš„æ—¶å€™éœ€è¦å…¨å‚/æ— å‚æ„é€ å‡½æ•°ï¼Ÿ

ä¸€å¥è¯ç†è§£ï¼šå› ä¸º Feign é»˜è®¤ä½¿ç”¨çš„åºåˆ—åŒ–å™¨æ˜¯ JACKSONï¼ŒJacksonååºåˆ—åŒ–JSONæ—¶éœ€è¦ç»å†ä»¥ä¸‹æ­¥éª¤ï¼š
- åˆ›å»ºå¯¹è±¡ï¼Œé»˜è®¤ä½¿ç”¨æ— å‚æ„é€ å‡½æ•°ï¼Œå®ƒæ˜¯æ•´ä¸ªå¤æ‚ååºåˆ—åŒ–æµç¨‹çš„èµ·ç‚¹
- è®¾ç½®å­—æ®µå€¼
- ç±»å‹åˆ†æ
- å­—æ®µæ˜ å°„
- ç±»å‹è½¬æ¢
- è®¾ç½®å­—æ®µå€¼
- å¤„ç†åµŒå¥—å¯¹è±¡
- åº”ç”¨æ³¨è§£
- å„ç§å¤„ç†...

> [!question] 
> Builder æ¨¡å¼æ˜¯ä»€ä¹ˆï¼Ÿ

Builder æ¨¡å¼ä¸»è¦è§£å†³äº†ä¸€ä¸ªä¾¿æ·æ€§çš„é—®é¢˜ï¼š
- å¦‚æœä½ éœ€è¦æ›´çµæ´»çš„æ„é€ å‚æ•°ï¼Œå¯èƒ½éœ€è¦å†™ 0-å…¨å‚ä¸ªä¸ªæ•°çš„æ„é€ æ–¹æ³•
- å¯ä»¥æµå¼è°ƒç”¨ï¼Œä¾¿æ·æ€§æ›´å¥½
- åœ¨ build æ–¹æ³•ä¸­å¯ä»¥è¿›è¡Œå‚æ•°æ ¡éªŒ
- ...

> [!question] 
> ç¨‹åºåŒ…ä¸å­˜åœ¨ä¸æ‰¾ä¸åˆ°ç¬¦å·çš„é—®é¢˜

- å¦‚æœæŠ¥é”™è¯´"ç¨‹åºåŒ…ä¸å­˜åœ¨"ä½†æ–‡ä»¶ç¡®å®å­˜åœ¨ â†’ ä¾èµ–é—®é¢˜
- å¦‚æœæŠ¥é”™è¯´"æ‰¾ä¸åˆ°ç¬¦å·"ä½†ç±»ç¡®å®å­˜åœ¨ â†’ ç¼–è¯‘é¡ºåºé—®é¢˜


Maven å¤šæ¨¡å—é¡¹ç›®çš„ç‰¹ç‚¹

1. æ¨¡å—é—´ä¾èµ–ï¼šA æ¨¡å—ä¾èµ– B æ¨¡å—ï¼Œå¿…é¡»å…ˆç¼–è¯‘ B
2. æœ¬åœ°ä»“åº“ï¼šä¾èµ–çš„æ¨¡å—å¿…é¡»å®‰è£…åˆ° ~/.m 2/repository
3. ä¼ é€’ä¾èµ–ï¼šå¯èƒ½é—´æ¥ä¾èµ–å…¶ä»–æ¨¡å—


  é—®é¢˜æ ¹æºï¼š
  - è¿™äº›æ¨¡å—å¯èƒ½æœ‰ä»£ç å˜æ›´ï¼Œä½†è¿˜æ²¡æœ‰å®‰è£…åˆ°æœ¬åœ°ä»“åº“
  - æˆ–è€…ä¹‹å‰ç¼–è¯‘å¤±è´¥ï¼Œå¯¼è‡´æœ¬åœ°ä»“åº“æ²¡æœ‰æœ€æ–°çš„ jar åŒ…
  
  è§£å†³æ–¹æ¡ˆï¼š`mvn clean install -DskipTests`

  è¿™æ ·å¯ä»¥ï¼š
  1. ç¼–è¯‘æ‰€æœ‰æ¨¡å—
  2. å°†æ‰€æœ‰æ¨¡å—å®‰è£…åˆ°æœ¬åœ°ä»“åº“
  3. ç¡®ä¿ä¾èµ–å…³ç³»æ­£ç¡®


> [!question] 
> å…³äº JSON åºåˆ—åŒ–

-  `@TableField(typeHandler = JacksonTypeHandler.class)`Â æ³¨è§£
	- å®ç°å‰å°ä¼ é€’çš„æ•°ç»„ç±»å‹æ•°æ®åˆ°åå°ç›´æ¥è½¬ä¸ºæ•°ç»„ç±»å‹çš„åŠŸèƒ½
	- å°† Java ä¸­çš„æ•°ç»„ç±»å‹åºåˆ—åŒ–ä¸º JSON å­—ç¬¦ä¸²å­˜å‚¨åˆ°æ•°æ®åº“
	- ä»æ•°æ®åº“è¯»å–æ—¶ï¼Œå°† JSON å­—ç¬¦ä¸²ååºåˆ—åŒ–ä¸º Java æ•°ç»„ç±»å‹

ä¸¾ä¾‹ï¼š
```java
@TableName("user")
public class User {
    @TableId(type = IdType.AUTO)
    private Long id;
    
    private String name;
    
    // ä½¿ç”¨JacksonTypeHandlerå¤„ç†æ•°ç»„ç±»å‹
    @TableField(typeHandler = JacksonTypeHandler.class)
    private String[] hobbies;
    
   // setter
   // getter
}
```

å½“å‰å°ä»¥ JSON æ ¼å¼ä¼ é€’åŒ…å«æ•°ç»„çš„æ•°æ®æ—¶ï¼š
```json
{ "name": "å¼ ä¸‰", "hobbies": ["è¯»ä¹¦", "è¿åŠ¨", "å¬éŸ³ä¹"] }
```


```java
	@PostMapping("/user")
    public String addUser(@RequestBody User user) {
        // è¿™é‡Œçš„userå¯¹è±¡ä¸­çš„hobbieså·²ç»æ˜¯String[]ç±»å‹
        System.out.println("ç”¨æˆ·çˆ±å¥½æ•°é‡ï¼š" + user.getHobbies().length);
        userService.save(user);
        return "ç”¨æˆ·æ·»åŠ æˆåŠŸ";
    }
```



> [!question]
> å…³äºæ—¥æœŸçš„å¤„ç†ã€‚å‰ç«¯ä¼ å‚æ•°ã€SpringBoot æ¥å‚ã€BeanUtils è½¬æ¢

- åç«¯å¯¹å¤–æš´éœ²çš„ API æ¥å£ä¸­ï¼Œæ—¥æœŸå­—æ®µå¯ä»¥ä½¿ç”¨ String ç±»å‹ï¼Œæ›´å¥½çš„å…¼å®¹æ€§å’Œé”™è¯¯å¤„ç†
- å†…éƒ¨å®ä½“ç±»ï¼Œä½¿ç”¨æ—¥æœŸç±»å‹ï¼Œå¯ä»¥è·å¾—æ›´å¥½çš„ç±»å‹å®‰å…¨æ”¯æŒï¼Œæ€§èƒ½
- æ•°æ®åº“å®ä½“ï¼Œå¿…é¡»ä½¿ç”¨æ—¥æœŸç±»å‹ï¼Œæ»¡è¶³æ•°æ®åº“å±‚é¢çš„ç±»å‹çº¦æŸ


```java
public class OptimalUserDTO {
    
    // å¯¹å¤–æ¥å£ä½¿ç”¨å­—ç¬¦ä¸²ï¼ˆçµæ´»æ€§ï¼‰
    @JsonProperty("createTime")
    private String createTimeStr;
    
    // å†…éƒ¨å¤„ç†ä½¿ç”¨æ—¥æœŸç±»å‹ï¼ˆç±»å‹å®‰å…¨ï¼‰
    @JsonIgnore
    private LocalDateTime createTime;
    
    // æä¾›è½¬æ¢æ–¹æ³•
    @JsonIgnore
    public LocalDateTime getCreateTime() {
        if (createTime == null && createTimeStr != null) {
            createTime = parseCreateTime(createTimeStr);
        }
        return createTime;
    }
    
    public void setCreateTime(LocalDateTime createTime) {
        this.createTime = createTime;
        this.createTimeStr = createTime != null ? 
            createTime.format(DateTimeFormatter.ofPattern("yyyy-MM-dd HH:mm:ss")) : null;
    }
    
    private LocalDateTime parseCreateTime(String timeStr) {
        // æ”¯æŒå¤šç§æ ¼å¼çš„è§£æé€»è¾‘
        return TimeUtils.parseFlexible(timeStr);
    }
}
```

## æ•°æ®åº“ DATABASE

åœ¨ Java ä½¿ç”¨ MybatisX å†™å¤šè¡¨æ„Ÿè§‰ä¸æ˜¯ä¸€ä¸ªæ˜æ™ºçš„é€‰æ‹©ï¼Œè¿˜æ˜¯ä½¿ç”¨ XML æ›´æ¸…æ™°  